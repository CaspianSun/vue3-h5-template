import service from '@/utils/request'

interface WeChatAccessTokenResponse {
  access_token: string
  expires_in: number
}
interface WeChatJsApiTicketResponse {
  errcode: number
  ticket: string
  expires_in: number
}

export function getWeChatAccessToken(appId: string, appSecret: string) {
  return service.request<WeChatAccessTokenResponse>({
    method: 'get',
    url: `https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid=${appId}&secret=${appSecret}`
  })
}

export function getWeChatJsApiTicket(accessToken: string) {
  return service.request<WeChatJsApiTicketResponse>({
    method: 'get',
    url: `https://api.weixin.qq.com/cgi-bin/ticket/getticket?access_token=${accessToken}&type=jsapi`
  })
}
